# Task3 è¿è¥ç®¡ç†åå°

ä¸€ä¸ªç°ä»£åŒ–çš„è¿è¥ç®¡ç†åå°ç³»ç»Ÿï¼Œä¸“ä¸ºç¤¾åŒºç®¡ç†ã€å¥–åŠ±å‘æ”¾ã€æ¨å¹¿é…ç½®ç­‰è¿è¥åœºæ™¯è®¾è®¡ã€‚åŸºäº Next.js 15ã€TypeScriptã€Prisma å’Œ MongoDB æ„å»ºã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [ä¸šåŠ¡æ¨¡å—](#ä¸šåŠ¡æ¨¡å—)
- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [æ•°æ®åº“é…ç½®](#æ•°æ®åº“é…ç½®)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ•´ä½“æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ UI å±‚    â”‚    â”‚   API æœåŠ¡å±‚    â”‚    â”‚   æ•°æ®å­˜å‚¨å±‚    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ - React ç»„ä»¶    â”‚â—„â”€â”€â–ºâ”‚ - Next.js API   â”‚â—„â”€â”€â–ºâ”‚ - MongoDB      â”‚
â”‚ - Tailwind CSS  â”‚    â”‚ - Prisma ORM    â”‚    â”‚ - Replica Set   â”‚
â”‚ - TypeScript    â”‚    â”‚ - è®¤è¯ä¸­é—´ä»¶    â”‚    â”‚ - æ•°æ®æ¨¡å‹      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒè®¾è®¡æ€æƒ³

1. **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªä¸šåŠ¡åŠŸèƒ½ç‹¬ç«‹å°è£…ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
2. **ç±»å‹å®‰å…¨**: å…¨é¢ä½¿ç”¨ TypeScriptï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰
3. **å“åº”å¼è®¾è®¡**: ç§»åŠ¨ç«¯ä¼˜å…ˆï¼Œé€‚é…å„ç§å±å¹•å°ºå¯¸
4. **æ•°æ®é©±åŠ¨**: åŸºäº MongoDB å’Œ Prisma ORMï¼Œæä¾›å¼ºç±»å‹æ•°æ®æ“ä½œ
5. **å¯æ‰©å±•æ€§**: æ”¯æŒå¤šç§Ÿæˆ·æ¶æ„ï¼Œä¾¿äºæ°´å¹³æ‰©å±•

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **React 19**: æœ€æ–°çš„ React ç‰ˆæœ¬ï¼Œæ”¯æŒå¹¶å‘ç‰¹æ€§
- **Next.js 15**: å…¨æ ˆ React æ¡†æ¶ï¼Œæä¾› SSR/SSG æ”¯æŒ
- **TypeScript**: é™æ€ç±»å‹æ£€æŸ¥ï¼Œæå‡ä»£ç è´¨é‡
- **Tailwind CSS**: åŸå­åŒ– CSS æ¡†æ¶ï¼Œå¿«é€Ÿæ„å»ºç°ä»£ UI
- **Radix UI**: æ— éšœç¢çš„ç»„ä»¶åº“ï¼Œæä¾›é«˜è´¨é‡çš„ UI ç»„ä»¶
- **React Hook Form**: é«˜æ€§èƒ½çš„è¡¨å•å¤„ç†åº“
- **React Query**: æ•°æ®è·å–å’ŒçŠ¶æ€ç®¡ç†
- **Zod**: TypeScript ä¼˜å…ˆçš„æ¨¡å¼éªŒè¯åº“

### åç«¯æŠ€æœ¯
- **Next.js API Routes**: åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„ API è·¯ç”±
- **Prisma**: ç°ä»£åŒ–çš„ ORMï¼Œæä¾›ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
- **MongoDB**: NoSQL æ–‡æ¡£æ•°æ®åº“ï¼Œæ”¯æŒå¤æ‚æ•°æ®ç»“æ„
- **JWT**: JSON Web Tokenï¼Œç”¨äºç”¨æˆ·è®¤è¯
- **Axios**: HTTP å®¢æˆ·ç«¯ï¼Œå¤„ç† API è¯·æ±‚

### å¼€å‘å·¥å…·
- **pnpm**: å¿«é€Ÿã€èŠ‚çœç£ç›˜ç©ºé—´çš„åŒ…ç®¡ç†å™¨
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²æ”¯æŒ

## ğŸ’¼ ä¸šåŠ¡æ¨¡å—

### 1. ç¤¾åŒºç®¡ç†
- ç¤¾åŒºä¿¡æ¯å±•ç¤ºå’Œç¼–è¾‘
- ç¤¾åŒºè®¤è¯çŠ¶æ€ç®¡ç†
- åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
- ç¤¾äº¤åª’ä½“è´¦å·ç»‘å®š
- åˆ›å»ºè€…ä¿¡æ¯ç®¡ç†

### 2. å¥–åŠ±å‘æ”¾
- æ‰¹é‡å¥–åŠ±å‘æ”¾
- å¤šç§èµ„äº§ç±»å‹æ”¯æŒ
- Telegram ç”¨æˆ·åŒ¹é…
- å‘æ”¾çŠ¶æ€è·Ÿè¸ª
- Excel å¯¼å…¥å¯¼å‡º

### 3. å‘æ”¾å†å²
- å†å²è®°å½•æŸ¥è¯¢
- çŠ¶æ€ç­›é€‰å’Œæœç´¢
- è¯¦ç»†é”™è¯¯ä¿¡æ¯
- æ•°æ®å¯¼å‡ºåŠŸèƒ½

### 4. æ¨å¹¿é…ç½®
- å¤šå¹³å°æ¨å¹¿ç®¡ç†
- å›¾ç‰‡å’Œé“¾æ¥é…ç½®
- ä¼˜å…ˆçº§å’Œå±•ç¤ºæ§åˆ¶
- å®æ—¶çŠ¶æ€æ›´æ–°

### 5. ç”¨æˆ·è®¤è¯
- Token åŸºç¡€è®¤è¯
- æƒé™æ§åˆ¶
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- å®‰å…¨ä¸­é—´ä»¶

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.0.0
- **pnpm**: >= 8.0.0
- **MongoDB**: >= 6.0
- **æ“ä½œç³»ç»Ÿ**: macOS, Linux, Windows

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd task3-operations-dashboard
```

### 2. å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install

# æˆ–ä½¿ç”¨ yarn
yarn install

# æˆ–ä½¿ç”¨ npm
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
åˆ›å»º `.env.local` æ–‡ä»¶ï¼š
```env
# MongoDB æ•°æ®åº“è¿æ¥
DATABASE_URL="mongodb://localhost:27017/task3_operations_dashboard_dev"

# åº”ç”¨é…ç½®
NODE_ENV=development
NEXT_PUBLIC_API_URL=http://localhost:3000/api
NEXT_PUBLIC_TASK3_API=your-task3-api-url

# JWT å¯†é’¥ï¼ˆå¯é€‰ï¼‰
JWT_SECRET=your-jwt-secret-key
```

### 4. å¯åŠ¨ MongoDB
ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰ï¼š
```bash
docker-compose up -d
```

æˆ–è€…ä½¿ç”¨æœ¬åœ° MongoDBï¼š
```bash
# macOS (ä½¿ç”¨ Homebrew)
brew services start mongodb/brew/mongodb-community

# Linux (ä½¿ç”¨ systemd)
sudo systemctl start mongod
```

### 5. åˆå§‹åŒ–æ•°æ®åº“
```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
pnpm prisma generate

# æ¨é€æ•°æ®åº“æ¨¡å¼ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
pnpm prisma db push

# å¯é€‰ï¼šè¿è¡Œç§å­æ•°æ®
pnpm tsx scripts/seed.ts
```

### 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
pnpm dev
```

åº”ç”¨å°†åœ¨ http://localhost:3000 å¯åŠ¨

### 7. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# æ„å»ºé¡¹ç›®
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
task3-operations-dashboard/
â”œâ”€â”€ app/                          # Next.js 13+ App Router
â”‚   â”œâ”€â”€ api/                      # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ community/            # ç¤¾åŒºç®¡ç† API
â”‚   â”‚   â”œâ”€â”€ promotion/            # æ¨å¹¿é…ç½® API
â”‚   â”‚   â”œâ”€â”€ reward-history/       # å¥–åŠ±å†å² API
â”‚   â”‚   â”œâ”€â”€ token/               # Token ç®¡ç† API
â”‚   â”‚   â””â”€â”€ user/                # ç”¨æˆ·ç®¡ç† API
â”‚   â”œâ”€â”€ globals.css              # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layout.tsx               # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                 # é¦–é¡µ
â”‚   â””â”€â”€ test-*/                  # æµ‹è¯•é¡µé¢
â”œâ”€â”€ components/                  # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                      # åŸºç¡€ UI ç»„ä»¶ï¼ˆRadix UIï¼‰
â”‚   â”œâ”€â”€ auth-layout.tsx          # è®¤è¯å¸ƒå±€
â”‚   â”œâ”€â”€ dashboard.tsx            # ä¸»ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ community-management.tsx # ç¤¾åŒºç®¡ç†
â”‚   â”œâ”€â”€ reward-distribution.tsx  # å¥–åŠ±å‘æ”¾
â”‚   â”œâ”€â”€ distribution-history.tsx # å‘æ”¾å†å²
â”‚   â””â”€â”€ promotion-management.tsx # æ¨å¹¿ç®¡ç†
â”œâ”€â”€ hooks/                       # è‡ªå®šä¹‰ React Hooks
â”‚   â”œâ”€â”€ use-api.ts              # API è°ƒç”¨ Hook
â”‚   â”œâ”€â”€ use-user.ts             # ç”¨æˆ·çŠ¶æ€ Hook
â”‚   â””â”€â”€ use-toast.ts            # Toast é€šçŸ¥ Hook
â”œâ”€â”€ lib/                        # å·¥å…·åº“å’Œé…ç½®
â”‚   â”œâ”€â”€ generated/              # Prisma ç”Ÿæˆçš„æ–‡ä»¶
â”‚   â”œâ”€â”€ api-client.ts           # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ auth.ts                 # è®¤è¯å·¥å…·
â”‚   â”œâ”€â”€ config.ts               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ data-model.ts           # æ•°æ®æ¨¡å‹ç±»å‹
â”‚   â”œâ”€â”€ prisma.ts               # Prisma å®¢æˆ·ç«¯
â”‚   â””â”€â”€ utils.ts                # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ prisma/                     # Prisma é…ç½®
â”‚   â””â”€â”€ schema.prisma           # æ•°æ®åº“æ¨¡å¼å®šä¹‰
â”œâ”€â”€ scripts/                    # è„šæœ¬æ–‡ä»¶
â”‚   â””â”€â”€ seed.ts                 # æ•°æ®åº“ç§å­æ•°æ®
â”œâ”€â”€ docs/                       # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ examples/                   # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”œâ”€â”€ docker-compose.yml          # Docker é…ç½®
â”œâ”€â”€ next.config.mjs             # Next.js é…ç½®
â”œâ”€â”€ tailwind.config.ts          # Tailwind CSS é…ç½®
â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â””â”€â”€ package.json                # é¡¹ç›®ä¾èµ–
```

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®

### MongoDB è¿æ¥
é¡¹ç›®æ”¯æŒå¤šç§ MongoDB è¿æ¥æ–¹å¼ï¼š

1. **æœ¬åœ° MongoDB**:
   ```env
   DATABASE_URL="mongodb://localhost:27017/task3_operations_dashboard_dev"
   ```

2. **MongoDB Atlasï¼ˆäº‘æœåŠ¡ï¼‰**:
   ```env
   DATABASE_URL="mongodb+srv://username:password@cluster.mongodb.net/task3_operations_dashboard?retryWrites=true&w=majority"
   ```

3. **Docker MongoDBï¼ˆæ¨èå¼€å‘ç¯å¢ƒï¼‰**:
   ```bash
   docker-compose up -d
   ```

### æ•°æ®æ¨¡å‹
- **FtUser**: ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…å«è®¤è¯ã€ç¤¾äº¤è´¦å·ç­‰
- **Community**: ç¤¾åŒºä¿¡æ¯ï¼Œæ”¯æŒåˆ†ç±»ã€è®¤è¯ç­‰
- **FtToken**: ç”¨æˆ·ä»¤ç‰Œï¼Œç”¨äºèº«ä»½éªŒè¯
- **Promotion**: æ¨å¹¿é…ç½®ï¼Œæ”¯æŒå¤šå¹³å°
- **RewardDistributionHistory**: å¥–åŠ±å‘æ”¾å†å²è®°å½•

## ğŸ“š API æ–‡æ¡£

### è®¤è¯æ–¹å¼
æ‰€æœ‰éœ€è¦è®¤è¯çš„ API éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­åŒ…å«ï¼š
```
Authorization: Bearer <token>
```

### ä¸»è¦ API ç«¯ç‚¹

#### ç”¨æˆ·ç®¡ç†
- `GET /api/user` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `POST /api/user` - åˆ›å»ºæ–°ç”¨æˆ·
- `PUT /api/user` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `DELETE /api/user` - åˆ é™¤ç”¨æˆ·

#### ç¤¾åŒºç®¡ç†
- `GET /api/community` - è·å–ç¤¾åŒºåˆ—è¡¨
- `PATCH /api/community` - æ›´æ–°ç¤¾åŒºè®¤è¯çŠ¶æ€

#### æ¨å¹¿ç®¡ç†
- `GET /api/promotion` - è·å–æ¨å¹¿é…ç½®åˆ—è¡¨
- `POST /api/promotion` - åˆ›å»ºæ¨å¹¿é…ç½®
- `PUT /api/promotion` - æ›´æ–°æ¨å¹¿é…ç½®
- `DELETE /api/promotion` - åˆ é™¤æ¨å¹¿é…ç½®

#### å¥–åŠ±å†å²
- `GET /api/reward-history` - è·å–å¥–åŠ±å‘æ”¾å†å²

### API å“åº”æ ¼å¼
```typescript
interface ApiResponse<T> {
  success: boolean
  message?: string
  data?: T
  error?: any
}
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒé…ç½®
1. åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶ `.env.production`
2. é…ç½® MongoDB Atlas æˆ–å…¶ä»–äº‘æ•°æ®åº“
3. è®¾ç½®å®‰å…¨çš„ JWT å¯†é’¥

### Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰
1. è¿æ¥ GitHub ä»“åº“åˆ° Vercel
2. é…ç½®ç¯å¢ƒå˜é‡
3. è‡ªåŠ¨éƒ¨ç½²

### Docker éƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t task3-operations-dashboard .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 task3-operations-dashboard
```

### ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²
```bash
# æ„å»ºé¡¹ç›®
pnpm build

# ä½¿ç”¨ PM2 è¿è¡Œ
pm2 start ecosystem.config.js
```

## ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript ç¼–å†™æ‰€æœ‰ä»£ç 
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ç»„ä»¶ä½¿ç”¨ PascalCase å‘½å
- æ–‡ä»¶ä½¿ç”¨ kebab-case å‘½å
- Git æäº¤ä¿¡æ¯ä½¿ç”¨ä¸­æ–‡

### å¼€å‘æµç¨‹
1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. ç¼–å†™ä»£ç å’Œæµ‹è¯•
3. è¿è¡Œ `pnpm lint` æ£€æŸ¥ä»£ç è´¨é‡
4. æäº¤ä»£ç å¹¶åˆ›å»º PR
5. ä»£ç å®¡æŸ¥ååˆå¹¶

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `prisma/schema.prisma` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
2. åœ¨ `app/api/` ä¸­åˆ›å»º API è·¯ç”±
3. åœ¨ `components/` ä¸­åˆ›å»º UI ç»„ä»¶
4. åœ¨ `hooks/` ä¸­æ·»åŠ æ•°æ®é€»è¾‘
5. æ›´æ–°ç±»å‹å®šä¹‰å’Œæ–‡æ¡£

### è°ƒè¯•æŠ€å·§
- ä½¿ç”¨ `console.log` è¿›è¡Œè°ƒè¯•ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- æŸ¥çœ‹ Network é¢æ¿æ£€æŸ¥ API è¯·æ±‚
- ä½¿ç”¨ MongoDB Compass æŸ¥çœ‹æ•°æ®åº“
- åˆ©ç”¨ React DevTools è°ƒè¯•ç»„ä»¶çŠ¶æ€

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: MongoDB è¿æ¥å¤±è´¥
A: æ£€æŸ¥ MongoDB æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Œç¡®è®¤è¿æ¥å­—ç¬¦ä¸²æ ¼å¼æ­£ç¡®

### Q: Prisma å®¢æˆ·ç«¯é”™è¯¯
A: è¿è¡Œ `pnpm prisma generate` é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯

### Q: æ„å»ºå¤±è´¥
A: æ£€æŸ¥ TypeScript é”™è¯¯ï¼Œè¿è¡Œ `pnpm type-check`

### Q: æ ·å¼ä¸ç”Ÿæ•ˆ
A: ç¡®è®¤ Tailwind CSS é…ç½®æ­£ç¡®ï¼Œæ£€æŸ¥ç±»åæ‹¼å†™

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼è¯·å‚è€ƒ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦ç»†çš„è´¡çŒ®æŒ‡å—ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚
